import{a as k,U as F}from"./UiButton-DPe_yz0q.js";import{_ as v,c as o,a as t,b as P,e as f,t as c,F as g,f as m,r as h,o as r,h as p,v as y,w as _,i as $,j as D,g as R,d as C,n as x}from"./index-D2VDRkuz.js";const M={components:{UiRating:k},props:{movie:{type:Object,required:!0},genres:{type:Array,required:!0}},data(){return{yearRelease:"",urlBase:"https://api.themoviedb.org/3"}},methods:{getGenres(a){return a.map(e=>this.genres.find(i=>i.id==e))},openMoviePage(){this.$router.push(`/search-movie/movie/${this.movie.id}`)}},computed:{returnYearRelease(){if(this.movie.release_date===null)return"—";const a=new Date(this.movie.release_date);return this.yearRelease=a.getFullYear(),this.yearRelease}},mounted(){}},V={class:"item-movie-content"},A={class:"movie-img-container"},w={key:0,class:"icon-container"},U=["src"],I={class:"item-movie-title"},L={class:"item-movie-description"},N={class:"list-row-container"},B={class:"list-row-elem"},S={key:1,class:"list-row-elem"};function q(a,e,i,u,l,n){const d=h("ui-rating");return r(),o("div",{class:"item-movie-container",onClick:e[0]||(e[0]=(...s)=>n.openMoviePage&&n.openMoviePage(...s))},[t("div",V,[t("div",A,[P(d,{rating:i.movie.vote_average,voteCount:i.movie.vote_count},null,8,["rating","voteCount"]),!i.movie.poster_path&&i.movie.poster_path===null?(r(),o("div",w,[...e[1]||(e[1]=[t("i",{class:"fa-solid fa-eye-slash"},null,-1)])])):f("",!0),i.movie.poster_path&&i.movie.poster_path!==null?(r(),o("img",{key:1,src:`https://image.tmdb.org/t/p/w342${i.movie.poster_path}`,loading:"lazy",alt:"",class:"item-movie-img"},null,8,U)):f("",!0)]),t("div",I,[t("h3",null,c(i.movie.title),1)]),t("div",L,[t("p",null,c(n.returnYearRelease),1),t("ul",N,[i.movie.genre_ids.length>0?(r(!0),o(g,{key:0},m(n.getGenres(i.movie.genre_ids),s=>(r(),o("li",B,c(s.name),1))),256)):(r(),o("li",S,"—"))])])])])}const G=v(M,[["render",q],["__scopeId","data-v-4f8f9b82"]]),E={components:{ItemMovie:G},props:{movies:{type:Array,required:!0},genres:{type:Array,required:!0}},data(){return{}}},z={class:"list-movies-container"},H={class:"item-movie"};function T(a,e,i,u,l,n){const d=h("item-movie");return r(),o("div",z,[(r(!0),o(g,null,m(i.movies,s=>(r(),o("div",H,[P(d,{movie:s,genres:i.genres},null,8,["movie","genres"])]))),256))])}const ge=v(E,[["render",T],["__scopeId","data-v-e156d6a2"]]),Y={emits:["filterData"],props:{genres:{type:Array,required:!0}},components:{UiButton:F},data(){return{genresFilter:[],rangeRating:[],fromDateFilter:"",toDateFilter:""}},methods:{toogleHiddenMenu(){document.querySelector(".filter-menu-container").classList.toggle("hidden-menu")},setGenresFilter(a){const e=document.getElementById(a);e.classList.toggle("active-button"),e.classList.contains("active-button")?this.genresFilter.push(a):this.genresFilter.splice(this.genresFilter.indexOf(a),1)},setRatingFilter(a){const e=document.getElementById(a),i=Number(e.innerText);if(this.rangeRating.length<2?(this.rangeRating.push(i),i!==10&&this.rangeRating.push(i+.9),e.classList.add("active-button")):Math.abs(i-this.rangeRating[0])<Math.abs(i-this.rangeRating[1])?this.rangeRating.splice(0,1,i):this.rangeRating.splice(1,2,i),this.rangeRating.length===2)for(let u=1;u<=10;u++){let l=document.getElementById(`rating-${u}`);u>=this.rangeRating[0]&&u<=this.rangeRating[1]?l.classList.add("active-button"):l.classList.remove("active-button")}},sendDataFilter(){this.$emit("filterData",this.genresFilter,this.rangeRating,this.fromDateFilter,this.toDateFilter)}}},j={class:"filter-container"},O={class:"filter-menu-container hidden-menu"},J={class:"genres-filter-container"},K=["id","onClick"],Q={class:"rating-filter-container"},W=["id","onClick"],X={class:"date-filter-container"},Z={class:"date-container"},ee={class:"date-container"};function te(a,e,i,u,l,n){const d=h("ui-button");return r(),o("div",j,[t("button",{class:"filter-button filter-settings",onClick:e[0]||(e[0]=(...s)=>n.toogleHiddenMenu&&n.toogleHiddenMenu(...s))},[...e[3]||(e[3]=[t("p",null,"Фильтры",-1),t("i",{class:"fa-solid fa-sliders"},null,-1)])]),t("div",O,[e[7]||(e[7]=t("p",{class:"title-filter"},"Жанры",-1)),t("div",J,[(r(!0),o(g,null,m(i.genres,s=>(r(),o("button",{class:"filter-button-menu",id:`${s.id}`,onClick:b=>n.setGenresFilter(s.id)},c(s.name),9,K))),256))]),e[8]||(e[8]=t("p",{class:"title-filter"},"Рейтинг",-1)),e[9]||(e[9]=t("p",{class:"p-filter"},"Выберите диапазон",-1)),t("div",Q,[(r(),o(g,null,m(10,s=>t("button",{class:"filter-button-menu one-width",id:`rating-${s}`,onClick:b=>n.setRatingFilter(`rating-${s}`)},c(s),9,W)),64))]),e[10]||(e[10]=t("p",{class:"title-filter"},"Дата выхода",-1)),t("div",X,[t("div",Z,[e[4]||(e[4]=t("label",{for:"from-date-filter",class:"label-date-filter"},"От",-1)),p(t("input",{type:"date",class:"input-date-filter",id:"from-date-filter","onUpdate:modelValue":e[1]||(e[1]=s=>l.fromDateFilter=s),name:"from-date-filter"},null,512),[[y,l.fromDateFilter]])]),t("div",ee,[e[5]||(e[5]=t("label",{for:"to-date-filter",class:"label-date-filter"},"До",-1)),p(t("input",{type:"date",class:"input-date-filter",id:"to-date-filter","onUpdate:modelValue":e[2]||(e[2]=s=>l.toDateFilter=s),name:"to-date-filter"},null,512),[[y,l.toDateFilter]])])]),P(d,{onClick:n.sendDataFilter,style:{"font-size":"0.75rem"}},{default:_(()=>[...e[6]||(e[6]=[$("Найти",-1)])]),_:1},8,["onClick"])])])}const me=v(Y,[["render",te],["__scopeId","data-v-0d78b3b5"]]),ie={emits:["sortData"],data(){return{sortValue:this.$route.path.includes("best")?"vote_average.desc":"popularity.desc"}},methods:{sendDataSort(){this.$emit("sortData",this.sortValue)}}},se={class:"sorting-container"};function ae(a,e,i,u,l,n){return r(),o("div",se,[p(t("select",{name:"sort",id:"sort",class:"sort-select filter-settings","onUpdate:modelValue":e[0]||(e[0]=d=>l.sortValue=d),onChange:e[1]||(e[1]=(...d)=>n.sendDataSort&&n.sendDataSort(...d))},[...e[2]||(e[2]=[R('<option value="popularity.desc" data-v-aed4b73f>Сначала популярные</option><option value="popularity.asc" data-v-aed4b73f>Сначала непопулярные</option><option value="vote_average.desc" data-v-aed4b73f>Сначала лучшие</option><option value="vote_average.asc" data-v-aed4b73f>Сначала худшие</option><option value="primary_release_date.desc" data-v-aed4b73f>Сначала новые</option><option value="primary_release_date.asc" data-v-aed4b73f>Сначала старые</option>',6)])],544),[[D,l.sortValue]])])}const ve=v(ie,[["render",ae],["__scopeId","data-v-aed4b73f"]]),ne={components:{UiButton:F},emits:["updateCountPage"],props:["totalPages"],data(){return{pagination:[],minPage:1,maxPage:9,currentPage:1}},methods:{getPaginationArray(a){this.currentPage=a,this.totalPages<=9?(this.minPage=1,this.maxPage=this.totalPages):this.currentPage+4<=this.totalPages?this.currentPage>5?(this.minPage=a-4,this.maxPage=a+4):(this.minPage=1,this.maxPage=9):(this.minPage=this.totalPages-8,this.maxPage=this.totalPages),this.$emit("updateCountPage",this.currentPage)},openNextPage(){this.currentPage++,this.getPaginationArray(this.currentPage),this.$emit("updateCountPage",this.currentPage)},openPreviousPage(){this.currentPage--,this.getPaginationArray(this.currentPage),this.$emit("updateCountPage",this.currentPage)}},computed:{updatePaginationArray(){this.pagination=[];for(let a=this.minPage;a<=this.maxPage;a++)this.pagination.push(a);return this.pagination}},watch:{totalPages(){this.getPaginationArray(this.currentPage||1)}}},re={class:"pagination-container"},oe={class:"pages-container"},le=["onClick"];function de(a,e,i,u,l,n){const d=h("ui-button");return r(),o("div",re,[t("div",oe,[this.currentPage>1?(r(),C(d,{key:0,onClick:e[0]||(e[0]=s=>n.openPreviousPage())},{default:_(()=>[...e[2]||(e[2]=[t("i",{class:"fa-solid fa-chevron-left"},null,-1)])]),_:1})):f("",!0),(r(!0),o(g,null,m(n.updatePaginationArray,s=>(r(),o("button",{class:x(["button-pagination",this.currentPage===s?"current-page-button":""]),onClick:b=>n.getPaginationArray(s)},c(s),11,le))),256)),this.currentPage<i.totalPages?(r(),C(d,{key:1,onClick:e[1]||(e[1]=s=>n.openNextPage())},{default:_(()=>[...e[3]||(e[3]=[t("i",{class:"fa-solid fa-chevron-right"},null,-1)])]),_:1})):f("",!0),$(" "+c(i.totalPages),1)])])}const fe=v(ne,[["render",de],["__scopeId","data-v-0a4b6c89"]]);export{ge as L,fe as U,ve as a,me as b};
