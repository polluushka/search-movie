import{a as k,U as F}from"./UiButton-E_cY_5DE.js";import{_ as h,c as r,a as t,b as P,e as v,t as c,F as g,f as m,r as p,o,h as f,v as y,w as _,i as D,j as R,g as x,n as $,d as C}from"./index-CLnnKecG.js";const M={components:{UiRating:k},props:{movie:{type:Object,required:!0},genres:{type:Array,required:!0}},data(){return{yearRelease:"",urlBase:"https://api.themoviedb.org/3"}},methods:{getGenres(n){return n.map(e=>this.genres.find(i=>i.id==e))},openMoviePage(){this.$router.push(`/search-movie/movie/${this.movie.id}`)}},computed:{returnYearRelease(){if(this.movie.release_date.length===0||this.movie.release_date===null)return"—";const n=new Date(this.movie.release_date);return this.yearRelease=n.getFullYear(),this.yearRelease}},mounted(){}},V={class:"item-movie-content"},A={class:"movie-img-container"},I={key:0,class:"icon-container"},S=["src"],w={class:"item-movie-title"},U={class:"item-movie-description"},L={class:"list-row-container"},N={class:"list-row-elem"},B={key:1,class:"list-row-elem"};function q(n,e,i,u,l,a){const d=p("ui-rating");return o(),r("div",{class:"item-movie-container",onClick:e[0]||(e[0]=(...s)=>a.openMoviePage&&a.openMoviePage(...s))},[t("div",V,[t("div",A,[P(d,{rating:i.movie.vote_average,voteCount:i.movie.vote_count},null,8,["rating","voteCount"]),!i.movie.poster_path&&i.movie.poster_path===null?(o(),r("div",I,[...e[1]||(e[1]=[t("i",{class:"fa-solid fa-eye-slash"},null,-1)])])):v("",!0),i.movie.poster_path&&i.movie.poster_path!==null?(o(),r("img",{key:1,src:`https://image.tmdb.org/t/p/w342${i.movie.poster_path}`,loading:"lazy",alt:"",class:"item-movie-img"},null,8,S)):v("",!0)]),t("div",w,[t("h3",null,c(i.movie.title),1)]),t("div",U,[t("p",null,c(a.returnYearRelease),1),t("ul",L,[i.movie.genre_ids.length>0?(o(!0),r(g,{key:0},m(a.getGenres(i.movie.genre_ids),s=>(o(),r("li",N,c(s.name),1))),256)):(o(),r("li",B,"—"))])])])])}const T=h(M,[["render",q],["__scopeId","data-v-4d49bd4e"]]),G={components:{ItemMovie:T},props:{movies:{type:Array,required:!0},genres:{type:Array,required:!0}},data(){return{}}},E={class:"list-movies-container"},z={class:"item-movie"};function H(n,e,i,u,l,a){const d=p("item-movie");return o(),r("div",E,[(o(!0),r(g,null,m(i.movies,s=>(o(),r("div",z,[P(d,{movie:s,genres:i.genres},null,8,["movie","genres"])]))),256))])}const ge=h(G,[["render",H],["__scopeId","data-v-e156d6a2"]]),Y={emits:["filterData"],props:{genres:{type:Array,required:!0}},components:{UiButton:F},data(){return{genresFilter:[],rangeRating:[],fromDateFilter:"",toDateFilter:""}},methods:{toogleHiddenMenu(){document.querySelector(".filter-menu-container").classList.toggle("hidden-menu")},setGenresFilter(n){const e=document.getElementById(n);e.classList.toggle("active-button"),e.classList.contains("active-button")?this.genresFilter.push(n):this.genresFilter.splice(this.genresFilter.indexOf(n),1)},setRatingFilter(n){const e=document.getElementById(n),i=Number(e.innerText);if(this.rangeRating.length<2?(this.rangeRating.push(i),i!==10&&this.rangeRating.push(i+.9),e.classList.add("active-button")):Math.abs(i-this.rangeRating[0])<Math.abs(i-this.rangeRating[1])?this.rangeRating.splice(0,1,i):this.rangeRating.splice(1,2,i),this.rangeRating.length===2)for(let u=1;u<=10;u++){let l=document.getElementById(`rating-${u}`);u>=this.rangeRating[0]&&u<=this.rangeRating[1]?l.classList.add("active-button"):l.classList.remove("active-button")}},sendDataFilter(){this.$emit("filterData",this.genresFilter,this.rangeRating,this.fromDateFilter,this.toDateFilter)}}},j={class:"filter-container"},O={class:"filter-menu-container hidden-menu"},J={class:"genres-filter-container"},K=["id","onClick"],Q={class:"rating-filter-container"},W=["id","onClick"],X={class:"date-filter-container"},Z={class:"date-container"},ee={class:"date-container"};function te(n,e,i,u,l,a){const d=p("ui-button");return o(),r("div",j,[t("button",{class:"filter-button filter-settings",onClick:e[0]||(e[0]=(...s)=>a.toogleHiddenMenu&&a.toogleHiddenMenu(...s))},[...e[3]||(e[3]=[t("p",null,"Фильтры",-1),t("i",{class:"fa-solid fa-sliders"},null,-1)])]),t("div",O,[e[7]||(e[7]=t("p",{class:"title-filter"},"Жанры",-1)),t("div",J,[(o(!0),r(g,null,m(i.genres,s=>(o(),r("button",{class:"filter-button-menu",id:`${s.id}`,onClick:b=>a.setGenresFilter(s.id)},c(s.name),9,K))),256))]),e[8]||(e[8]=t("p",{class:"title-filter"},"Рейтинг",-1)),e[9]||(e[9]=t("p",{class:"p-filter"},"Выберите диапазон",-1)),t("div",Q,[(o(),r(g,null,m(10,s=>t("button",{class:"filter-button-menu one-width",id:`rating-${s}`,onClick:b=>a.setRatingFilter(`rating-${s}`)},c(s),9,W)),64))]),e[10]||(e[10]=t("p",{class:"title-filter"},"Дата выхода",-1)),t("div",X,[t("div",Z,[e[4]||(e[4]=t("label",{for:"from-date-filter",class:"label-date-filter"},"От",-1)),f(t("input",{type:"date",class:"input-date-filter",id:"from-date-filter","onUpdate:modelValue":e[1]||(e[1]=s=>l.fromDateFilter=s),name:"from-date-filter"},null,512),[[y,l.fromDateFilter]])]),t("div",ee,[e[5]||(e[5]=t("label",{for:"to-date-filter",class:"label-date-filter"},"До",-1)),f(t("input",{type:"date",class:"input-date-filter",id:"to-date-filter","onUpdate:modelValue":e[2]||(e[2]=s=>l.toDateFilter=s),name:"to-date-filter"},null,512),[[y,l.toDateFilter]])])]),P(d,{onClick:a.sendDataFilter,style:{"font-size":"0.75rem"}},{default:_(()=>[...e[6]||(e[6]=[D("Найти",-1)])]),_:1},8,["onClick"])])])}const me=h(Y,[["render",te],["__scopeId","data-v-0d78b3b5"]]),ie={emits:["sortData"],data(){return{sortValue:this.$route.path.includes("best")?"vote_average.desc":"popularity.desc",theme:localStorage.getItem("theme")}},methods:{sendDataSort(){this.$emit("sortData",this.sortValue)},getTheme(){this.theme=localStorage.getItem("theme")}},computed:{changeTheme(){return localStorage.getItem("theme")==="dark"?"sort-icon-dark":"sort-icon-light"}}},se={class:"sorting-container"};function ne(n,e,i,u,l,a){return o(),r("div",se,[f(t("select",{name:"sort",id:"sort",class:$(["sort-select filter-settings",a.changeTheme]),"onUpdate:modelValue":e[0]||(e[0]=d=>l.sortValue=d),onChange:e[1]||(e[1]=(...d)=>a.sendDataSort&&a.sendDataSort(...d))},[...e[2]||(e[2]=[x('<option value="popularity.desc" data-v-ecb24e19>Сначала популярные</option><option value="popularity.asc" data-v-ecb24e19>Сначала непопулярные</option><option value="vote_average.desc" data-v-ecb24e19>Сначала лучшие</option><option value="vote_average.asc" data-v-ecb24e19>Сначала худшие</option><option value="primary_release_date.desc" data-v-ecb24e19>Сначала новые</option><option value="primary_release_date.asc" data-v-ecb24e19>Сначала старые</option>',6)])],34),[[R,l.sortValue]]),e[3]||(e[3]=t("div",{class:"mask-icon"},null,-1))])}const he=h(ie,[["render",ne],["__scopeId","data-v-ecb24e19"]]),ae={components:{UiButton:F},emits:["updateCountPage"],props:["totalPages","countPages"],data(){return{pagination:[],minPage:1,maxPage:9,currentPage:1}},methods:{getPaginationArray(n){this.currentPage=n,this.totalPages<=9?(this.minPage=1,this.maxPage=this.totalPages):this.currentPage+4<=this.totalPages?this.currentPage>5?(this.minPage=n-4,this.maxPage=n+4):(this.minPage=1,this.maxPage=9):(this.minPage=this.totalPages-8,this.maxPage=this.totalPages),this.$emit("updateCountPage",this.currentPage)},openNextPage(){this.currentPage++,this.getPaginationArray(this.currentPage),this.$emit("updateCountPage",this.currentPage)},openPreviousPage(){this.currentPage--,this.getPaginationArray(this.currentPage),this.$emit("updateCountPage",this.currentPage)}},computed:{updatePaginationArray(){this.pagination=[];for(let n=this.minPage;n<=this.maxPage;n++)this.pagination.push(n);return this.pagination}},watch:{totalPages(){this.getPaginationArray(this.countPages)},countPages(){this.getPaginationArray(this.countPages)}}},oe={class:"pagination-container"},re={class:"pages-container"},le=["onClick"];function de(n,e,i,u,l,a){const d=p("ui-button");return o(),r("div",oe,[t("div",re,[this.currentPage>1?(o(),C(d,{key:0,onClick:e[0]||(e[0]=s=>a.openPreviousPage())},{default:_(()=>[...e[2]||(e[2]=[t("i",{class:"fa-solid fa-chevron-left"},null,-1)])]),_:1})):v("",!0),(o(!0),r(g,null,m(a.updatePaginationArray,s=>(o(),r("button",{class:$(["button-pagination",this.currentPage===s?"current-page-button":""]),onClick:b=>a.getPaginationArray(s)},c(s),11,le))),256)),this.currentPage<i.totalPages?(o(),C(d,{key:1,onClick:e[1]||(e[1]=s=>a.openNextPage())},{default:_(()=>[...e[3]||(e[3]=[t("i",{class:"fa-solid fa-chevron-right"},null,-1)])]),_:1})):v("",!0)])])}const ve=h(ae,[["render",de],["__scopeId","data-v-51f8973f"]]);export{ge as L,ve as U,he as a,me as b};
