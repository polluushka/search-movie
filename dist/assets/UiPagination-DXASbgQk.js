import{a as F,U as C}from"./UiButton-CoeeNHVy.js";import{_ as v,c as r,a as t,b as P,e as h,t as g,F as c,f as m,r as p,o,h as f,v as y,w as _,i as k,j as D,g as R,d as $,n as x}from"./index-oHZwTHRo.js";const M={components:{UiRating:F},props:{movie:{type:Object,required:!0},genres:{type:Array,required:!0}},data(){return{yearRelease:"",urlBase:"https://api.themoviedb.org/3"}},methods:{getGenres(n){return n.map(e=>this.genres.find(i=>i.id==e))},openMoviePage(){this.$router.push(`/search-movie/movie/${this.movie.id}`)}},computed:{returnYearRelease(){if(this.movie.release_date.length===0||this.movie.release_date===null)return"—";const n=new Date(this.movie.release_date);return this.yearRelease=n.getFullYear(),this.yearRelease}}},V={class:"item-movie-content"},A={class:"movie-img-container"},w={key:0,class:"icon-container"},U=["src"],I={class:"item-movie-title"},L={class:"item-movie-description"},N={class:"list-row-container"},B={class:"list-row-elem"},S={key:1,class:"list-row-elem"};function q(n,e,i,d,l,a){const u=p("ui-rating");return o(),r("div",{class:"item-movie-container",onClick:e[0]||(e[0]=(...s)=>a.openMoviePage&&a.openMoviePage(...s))},[t("div",V,[t("div",A,[P(u,{rating:i.movie.vote_average,voteCount:i.movie.vote_count},null,8,["rating","voteCount"]),!i.movie.poster_path&&i.movie.poster_path===null?(o(),r("div",w,[...e[1]||(e[1]=[t("i",{class:"fa-solid fa-eye-slash"},null,-1)])])):h("",!0),i.movie.poster_path&&i.movie.poster_path!==null?(o(),r("img",{key:1,src:`https://image.tmdb.org/t/p/w342${i.movie.poster_path}`,loading:"lazy",alt:"",class:"item-movie-img"},null,8,U)):h("",!0)]),t("div",I,[t("h3",null,g(i.movie.title),1)]),t("div",L,[t("p",null,g(a.returnYearRelease),1),t("ul",N,[i.movie.genre_ids.length>0?(o(!0),r(c,{key:0},m(a.getGenres(i.movie.genre_ids),s=>(o(),r("li",B,g(s.name),1))),256)):(o(),r("li",S,"—"))])])])])}const G=v(M,[["render",q],["__scopeId","data-v-d05c1380"]]),E={components:{ItemMovie:G},props:{movies:{type:Array,required:!0},genres:{type:Array,required:!0}}},H={class:"list-movies-container"},z={class:"item-movie"};function T(n,e,i,d,l,a){const u=p("item-movie");return o(),r("div",H,[(o(!0),r(c,null,m(i.movies,s=>(o(),r("div",z,[P(u,{movie:s,genres:i.genres},null,8,["movie","genres"])]))),256))])}const ce=v(E,[["render",T],["__scopeId","data-v-0e86d7bc"]]),Y={emits:["filterData"],props:{genres:{type:Array,required:!0}},components:{UiButton:C},data(){return{genresFilter:[],rangeRating:[],fromDateFilter:"",toDateFilter:""}},methods:{toogleHiddenMenu(){document.querySelector(".filter-menu-container").classList.toggle("hidden-menu")},setGenresFilter(n){const e=document.getElementById(n);e.classList.toggle("active-button"),e.classList.contains("active-button")?this.genresFilter.push(n):this.genresFilter.splice(this.genresFilter.indexOf(n),1)},setRatingFilter(n){const e=document.getElementById(n),i=Number(e.innerText);if(this.rangeRating.length<2?(this.rangeRating.push(i),i!==10&&this.rangeRating.push(i+.9),e.classList.add("active-button")):Math.abs(i-this.rangeRating[0])<Math.abs(i-this.rangeRating[1])?this.rangeRating.splice(0,1,i):this.rangeRating.splice(1,2,i),this.rangeRating.length===2)for(let d=1;d<=10;d++){let l=document.getElementById(`rating-${d}`);d>=this.rangeRating[0]&&d<=this.rangeRating[1]?l.classList.add("active-button"):l.classList.remove("active-button")}},sendDataFilter(){this.toogleHiddenMenu(),this.$emit("filterData",this.genresFilter,this.rangeRating,this.fromDateFilter,this.toDateFilter)}}},j={class:"filter-container"},O={class:"filter-menu-container hidden-menu"},J={class:"genres-filter-container"},K=["id","onClick"],Q={class:"rating-filter-container"},W=["id","onClick"],X={class:"date-filter-container"},Z={class:"date-container"},ee={class:"date-container"};function te(n,e,i,d,l,a){const u=p("ui-button");return o(),r("div",j,[t("button",{class:"filter-button filter-settings",onClick:e[0]||(e[0]=(...s)=>a.toogleHiddenMenu&&a.toogleHiddenMenu(...s))},[...e[3]||(e[3]=[t("p",null,"Фильтры",-1),t("i",{class:"fa-solid fa-sliders"},null,-1)])]),t("div",O,[e[7]||(e[7]=t("p",{class:"title-filter"},"Жанры",-1)),t("div",J,[(o(!0),r(c,null,m(i.genres,s=>(o(),r("button",{class:"filter-button-menu",id:`${s.id}`,onClick:b=>a.setGenresFilter(s.id)},g(s.name),9,K))),256))]),e[8]||(e[8]=t("p",{class:"title-filter"},"Рейтинг",-1)),e[9]||(e[9]=t("p",{class:"p-filter"},"Выберите диапазон",-1)),t("div",Q,[(o(),r(c,null,m(10,s=>t("button",{class:"filter-button-menu one-width",id:`rating-${s}`,onClick:b=>a.setRatingFilter(`rating-${s}`)},g(s),9,W)),64))]),e[10]||(e[10]=t("p",{class:"title-filter"},"Дата выхода",-1)),t("div",X,[t("div",Z,[e[4]||(e[4]=t("label",{for:"from-date-filter",class:"label-date-filter"},"От",-1)),f(t("input",{type:"date",class:"input-date-filter",id:"from-date-filter","onUpdate:modelValue":e[1]||(e[1]=s=>l.fromDateFilter=s),name:"from-date-filter"},null,512),[[y,l.fromDateFilter]])]),t("div",ee,[e[5]||(e[5]=t("label",{for:"to-date-filter",class:"label-date-filter"},"До",-1)),f(t("input",{type:"date",class:"input-date-filter",id:"to-date-filter","onUpdate:modelValue":e[2]||(e[2]=s=>l.toDateFilter=s),name:"to-date-filter"},null,512),[[y,l.toDateFilter]])])]),P(u,{onClick:a.sendDataFilter,style:{"font-size":"0.75rem"}},{default:_(()=>[...e[6]||(e[6]=[k("Найти",-1)])]),_:1},8,["onClick"])])])}const me=v(Y,[["render",te],["__scopeId","data-v-a0f9a306"]]),ie={emits:["sortData"],data(){return{sortValue:this.$route.path.includes("best")?"vote_average.desc":"popularity.desc"}},methods:{sendDataSort(){this.$emit("sortData",this.sortValue)}}},se={class:"sorting-container"};function ne(n,e,i,d,l,a){return o(),r("div",se,[f(t("select",{name:"sort",id:"sort",class:"sort-select filter-settings","onUpdate:modelValue":e[0]||(e[0]=u=>l.sortValue=u),onChange:e[1]||(e[1]=(...u)=>a.sendDataSort&&a.sendDataSort(...u))},[...e[2]||(e[2]=[R('<option value="popularity.desc" data-v-0692b57e>Сначала популярные</option><option value="popularity.asc" data-v-0692b57e>Сначала непопулярные</option><option value="vote_average.desc" data-v-0692b57e>Сначала лучшие</option><option value="vote_average.asc" data-v-0692b57e>Сначала худшие</option><option value="primary_release_date.desc" data-v-0692b57e>Сначала новые</option><option value="primary_release_date.asc" data-v-0692b57e>Сначала старые</option>',6)])],544),[[D,l.sortValue]]),e[3]||(e[3]=t("div",{class:"mask-icon"},null,-1))])}const ve=v(ie,[["render",ne],["__scopeId","data-v-0692b57e"]]),ae={components:{UiButton:C},emits:["updateCountPage"],props:["totalPages","countPages"],data(){return{pagination:[],minPage:1,maxPage:9,currentPage:1}},methods:{getPaginationArray(n){this.currentPage=n,this.totalPages<=9?(this.minPage=1,this.maxPage=this.totalPages):this.currentPage+4<=this.totalPages?this.currentPage>5?(this.minPage=n-4,this.maxPage=n+4):(this.minPage=1,this.maxPage=9):(this.minPage=this.totalPages-8,this.maxPage=this.totalPages),this.$emit("updateCountPage",this.currentPage)},openNextPage(){this.currentPage++,this.getPaginationArray(this.currentPage),this.$emit("updateCountPage",this.currentPage)},openPreviousPage(){this.currentPage--,this.getPaginationArray(this.currentPage),this.$emit("updateCountPage",this.currentPage)}},computed:{updatePaginationArray(){this.pagination=[];for(let n=this.minPage;n<=this.maxPage;n++)this.pagination.push(n);return this.pagination}},watch:{totalPages(){this.getPaginationArray(this.countPages)},countPages(){this.getPaginationArray(this.countPages)}}},oe={class:"pagination-container"},re={class:"pages-container"},le=["onClick"];function ue(n,e,i,d,l,a){const u=p("ui-button");return o(),r("div",oe,[t("div",re,[this.currentPage>1?(o(),$(u,{key:0,onClick:e[0]||(e[0]=s=>a.openPreviousPage())},{default:_(()=>[...e[2]||(e[2]=[t("i",{class:"fa-solid fa-chevron-left"},null,-1)])]),_:1})):h("",!0),(o(!0),r(c,null,m(a.updatePaginationArray,s=>(o(),r("button",{class:x(["button-pagination",this.currentPage===s?"current-page-button":""]),onClick:b=>a.getPaginationArray(s)},g(s),11,le))),256)),this.currentPage<i.totalPages?(o(),$(u,{key:1,onClick:e[1]||(e[1]=s=>a.openNextPage())},{default:_(()=>[...e[3]||(e[3]=[t("i",{class:"fa-solid fa-chevron-right"},null,-1)])]),_:1})):h("",!0)])])}const he=v(ae,[["render",ue],["__scopeId","data-v-51f8973f"]]);export{ce as L,he as U,ve as a,me as b};
